(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,s){"use strict";s.d(t,"b",(function(){return n}));var r={read(e,t){const s={at:t?"":"@",cleanName:e=>t&&e.split(/:(.+)/)[1]||e,toObj(e){let r={};if(1===e.nodeType){if(e.attributes.length)for(let n=0;n<e.attributes.length;n+=1){const{name:o}=e.attributes[n],{value:i}=e.attributes[n],a=0===o.lastIndexOf("xmlns:",0);t&&a||(r[s.at+s.cleanName(o)]=(i||"").toString())}if(e.firstChild){let t=0,n=0,o=!1;for(let s=e.firstChild;s;s=s.nextSibling)1===s.nodeType?o=!0:3===s.nodeType&&s.nodeValue.match(/[^ \f\n\r\t\v]/)?t+=1:4===s.nodeType&&(n+=1);if(o)if(t<2&&n<2){s.removeWhite(e);for(let t=e.firstChild;t;t=t.nextSibling)3===t.nodeType?r["#text"]=s.escape(t.nodeValue):4===t.nodeType?r["#cdata"]=s.escape(t.nodeValue):r[t.nodeName]?r[t.nodeName]instanceof Array?r[t.nodeName][r[t.nodeName].length]=s.toObj(t):r[t.nodeName]=[r[t.nodeName],s.toObj(t)]:r[t.nodeName]=s.toObj(t)}else e.attributes.length?r["#text"]=s.escape(s.innerXml(e)):r=s.escape(s.innerXml(e));else if(t)e.attributes.length?r["#text"]=s.escape(s.innerXml(e)):r=s.escape(s.innerXml(e));else if(n)if(n>1)r=s.escape(s.innerXml(e));else for(let t=e.firstChild;t;t=t.nextSibling)r["#cdata"]=s.escape(t.nodeValue)}e.attributes.length||e.firstChild||(r=null)}else if(9===e.nodeType)r=s.toObj(e.documentElement);else if(8===e.nodeType)return e.data;return r},innerXml(e){let t="";if("innerHTML"in e)t=e.innerHTML;else{const s=e=>{let t="";if(1===e.nodeType){t+="<"+e.nodeName;for(let s=0;s<e.attributes.length;s+=1){const{name:r}=e.attributes[s];t+=` ${r}="${(e.attributes[s].value||"").toString()}"`}if(e.firstChild){t+=">";for(let r=e.firstChild;r;r=r.nextSibling)t+=s(r);t+=`</${e.nodeName}>`}else t+="/>"}else 3===e.nodeType?t+=e.nodeValue:4===e.nodeType&&(t+=`<![CDATA[${e.nodeValue}]]>`);return t};for(let r=e.firstChild;r;r=r.nextSibling)t+=s(r)}return t},escape:e=>e.replace(/[\\]/g,"\\\\").replace(/["]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r"),removeWhite(e){e.normalize();for(let t=e.firstChild;t;)if(3===t.nodeType)if(t.nodeValue.match(/[^ \f\n\r\t\v]/))t=t.nextSibling;else{const s=t.nextSibling;e.removeChild(t),t=s}else 1===t.nodeType?(s.removeWhite(t),t=t.nextSibling):t=t.nextSibling;return e}},r=t?e.replace(/<(\/?)([^:>\s]*:)?([^>]+)>/g,"<$1$3>"):e,n=(new DOMParser).parseFromString(r,"text/xml"),o=9===n.nodeType?n.documentElement:n,i={};return i[o.nodeName]=s.toObj(s.removeWhite(o)),i},write(e){const t=(e,s,r)=>{let n="";if(e instanceof Array)for(let o=0,i=e.length;o<i;o+=1)n+=r+t(e[o],s,""+r)+"\n";else if("object"==typeof e){let o=!1;n+=`${r}<${s}`,Object.keys(e).forEach(t=>{"@"===t.charAt(0)?n+=` ${t.substr(1)}="${e[t].toString()}"`:o=!0}),n+=o?">":"/>",o&&(Object.keys(e).forEach(s=>{"#text"===s?n+=e[s]:"#cdata"===s?n+=`<![CDATA[${e[s]}]]>`:"@"!==s.charAt(0)&&(n+=t(e[s],s,""+r))}),n+=`${"\n"===n.charAt(n.length-1)?r:""}</${s}>`)}else n+=`${r}<${s}>${e.toString()}</${s}>`;return n};let s="";return Object.keys(e).forEach(r=>{s+=t(e[r],r,"")}),s}};const n=e=>"[object Array]"===Object.prototype.toString.call(e),o=e=>n(e)?e:[e];t.a={_url:null,setUrl(e){return this._url=e,this},getCapabilities(e,t){return this._send_xml({"sos:GetCapabilities":{"@xmlns:sos":"http://www.opengis.net/sos/2.0","@xmlns:ows":"http://www.opengis.net/ows/1.1","@service":"SOS","ows:AcceptVersions":{"ows:Version":"2.0.0"},"ows:Sections":{"ows:Section":"Contents"}}},t=>{const s=t.Capabilities.contents.Contents.offering.map(e=>e.ObservationOffering).map(e=>({...e,name:e.name["#text"],procedure:o(e.procedure),procedureDescriptionFormat:o(e.procedureDescriptionFormat),observableProperty:o(e.observableProperty),relatedFeature:e.relatedFeature?e.relatedFeature.map(e=>({featureOfInterest:e.FeatureRelationship.target.href,role:[]})):void 0,observedArea:{lowerLeft:e.observedArea.Envelope.lowerCorner.split(" ").map(e=>Number(e)),upperRight:e.observedArea.Envelope.upperCorner.split(" ").map(e=>Number(e)),crs:{type:"link",properties:{href:e.observedArea.Envelope.srsName}}},phenomenonTime:[e.phenomenonTime.TimePeriod.beginPosition,e.phenomenonTime.TimePeriod.endPosition],resultTime:[e.resultTime.TimePeriod.beginPosition,e.resultTime.TimePeriod.endPosition],responseFormat:o(e.responseFormat),observationType:o(e.observationType),featureOfInterestType:o(e.featureOfInterestType)}));e(s)},t),this},describeSensor(e,t,s){return this._send_xml({"swes:DescribeSensor":{"@xmlns:swes":"http://www.opengis.net/swes/2.0","@service":"SOS","@version":"2.0.0","swes:procedure":"http://sensors.portdebarcelona.cat/def/weather/procedure","swes:procedureDescriptionFormat":"http://www.opengis.net/sensorML/1.0.1"}},e=>{const s=e.DescribeSensorResponse.description.SensorDescription.data.SensorML.member;t(s)},s),this},getFeatureOfInterest(e,t,s){return this._send_xml({"sos:GetFeatureOfInterest":{"@xmlns:sos":"http://www.opengis.net/sos/2.0","@service":"SOS","@version":"2.0.0","sos:procedure":"http://sensors.portdebarcelona.cat/def/weather/procedure"}},e=>{const s=e.GetFeatureOfInterestResponse.featureMember.map(e=>e.SF_SpatialSamplingFeature).map(e=>({identifier:{codespace:"",value:e.identifier["#text"]},name:{codespace:e.name.codeSpace,value:e.name["#text"]},sampledFeature:e.sampledFeature.href,geometry:{type:Object.keys(e.shape)[0],coordinates:Object.values(e.shape)[0].pos["#text"].split(" ").map(e=>Number(e))}}));console.log(JSON.stringify(s,null,2)),t(s)},s),this},getDataAvailability(e,t,s,r,n,o){const i={request:"GetDataAvailability"};return e&&(i.procedure=e),t&&(i.offering=t),s&&s.length&&(i.featureOfInterest=s),r&&r.length&&(i.observedProperty=r),this._send_json(i,({dataAvailability:e})=>{n(e)},o),this},getObservation(e,t,s,r,n,o){const i={request:"GetObservation"};if(e&&(i.offering=e),t&&t.length&&(i.featureOfInterest=t),s&&s.length&&(i.observedProperty=s),r){let e;e=r.length&&2===r.length?"during":"equals";const t={};t[e]={ref:"om:resultTime",value:r},i.temporalFilter=[t]}return this._send_json(i,({observations:e})=>{n(e)},o),this},_send_json(e,t,s){e.service="SOS",e.version="2.0.0";const r=new XMLHttpRequest;r.onreadystatechange=()=>{if(4===r.readyState){let n=r.responseText;try{n=JSON.parse(n)}catch(e){}if(200===r.status)t.call(this,n);else{const t={status:r.statusText,url:this._url,request:e,response:n};s&&s.call(this,t.status,t.url,t.request,t.response)}}},r.open("POST",this._url,!0),r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader("Accept","application/json"),r.send(JSON.stringify(e))},_send_xml(e,t,s){const n=new XMLHttpRequest;n.onreadystatechange=()=>{if(4===n.readyState){let o=n.responseText;try{o=r.read(o,!0)}catch(e){}if(200===n.status)t.call(this,o);else{const t={status:n.statusText,url:this._url,request:e,response:o};s&&s.call(this,t.status,t.url,t.request,t.response)}}},n.open("POST",this._url,!0),n.setRequestHeader("Content-Type","application/xml"),n.setRequestHeader("Accept","application/xml"),n.send(r.write(e))}}},212:function(e,t,s){"use strict";var r=s(28);t.a={inputs:["service","offering"],optional_inputs:["footnote","custom_css_url","display_utc_times"],init(e,t){void 0!==e.custom_css_url&&function(e){const t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e),void 0!==t&&document.getElementsByTagName("head")[0].appendChild(t)}(e.custom_css_url),void 0!==e.footnote&&t.querySelector(".footnote")&&(t.querySelector(".footnote").innerHTML=e.footnote),e.display_utc_times&&r.a.utc(!0)}}},28:function(e,t,s){"use strict";var r=s(1);const n={utc:!1,locale:navigator.language||navigator.browserLanguage};t.a={display:e=>e?n.utc?e.toLocaleString(n.locale,{timeZone:"UTC"})+" UTC":e.toLocaleString(n.locale):r.a.t("(no date)"),locale:e=>(e&&(n.locale=e),n.locale),utc:e=>(void 0!==e&&(n.utc=e),n.utc)}}}]);
//# sourceMappingURL=widget-compass-js~widget-gauge-js~widget-jqgrid-js~widget-map-js~widget-panel-js~widget-progressbar-~bc566e36.chunk.js.map