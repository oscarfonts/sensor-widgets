(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["widget-progressbar-js"],{

/***/ "./node_modules/css-loader/dist/cjs.js!./src/js/widget/progressbar.css":
/*!*****************************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/js/widget/progressbar.css ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);\n// Imports\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()(false);\n// Module\n___CSS_LOADER_EXPORT___.push([module.i, \".progressbar.widget .progress {\\n    height: 85px;\\n    width: 90%;\\n    margin: 0 auto;\\n    padding-left: 12px;\\n    padding-right: 12px;\\n}\\n\\n.progressbar.widget .background-bar {\\n    text-align: left;\\n    margin-top: 30px;\\n    background: #e9e5e2;\\n    background-image: -webkit-gradient(linear, left top, left bottom, from(#e1ddd9), to(#e9e5e2));\\n    background-image: -webkit-linear-gradient(top, #e1ddd9, #e9e5e2);\\n    background-image: -moz-linear-gradient(top, #e1ddd9, #e9e5e2);\\n    background-image: -ms-linear-gradient(top, #e1ddd9, #e9e5e2);\\n    background-image: -o-linear-gradient(top, #e1ddd9, #e9e5e2);\\n    background-image: linear-gradient(top, #e1ddd9, #e9e5e2);\\n    height: 20px;\\n    border-radius: 10px;\\n    -moz-box-shadow: 0 1px 0 #bebbb9 inset, 0 1px 0 #fcfcfc;\\n    -webkit-box-shadow: 0 1px 0 #bebbb9 inset, 0 1px 0 #fcfcfc;\\n    box-shadow: 0 1px 0 #bebbb9 inset, 0 1px 0 #fcfcfc;\\n}\\n.progressbar.widget .bar {\\n    width: 10px;\\n    height: 18px;\\n    position: absolute;\\n    border-radius: 10px;\\n    -moz-box-shadow: 0 1px 0 #fcfcfc inset, 0 1px 0 #bebbb9;\\n    -webkit-box-shadow: 0 1px 0 #fcfcfc inset, 0 1px 0 #bebbb9;\\n    box-shadow: 0 1px 0 #fcfcfc inset, 0 1px 0 #bebbb9;\\n}\\n.progressbar.widget .min {\\n    position: relative;\\n    top: -20px;\\n    float: left;\\n    width: 0;\\n}\\n.progressbar.widget .max {\\n    position: relative;\\n    top: -20px;\\n    float: right;\\n}\\n.progressbar.widget .value {\\n    position: relative;\\n    top: 25px;\\n    text-align: right;\\n}\\n.progressbar.widget .pink {\\n    background-color: #f674a4;\\n    background-image: -webkit-gradient(linear, left top, left bottom, from(#f674a4), to(#e06995));\\n    background-image: -webkit-linear-gradient(top, #f674a4, #e06995);\\n    background-image: -moz-linear-gradient(top, #f674a4, #e06995);\\n    background-image: -ms-linear-gradient(top, #f674a4, #e06995);\\n    background-image: -o-linear-gradient(top, #f674a4, #e06995);\\n    background-image: linear-gradient(top, #f674a4, #e06995);\\n}\\n.progressbar.widget .yellow {\\n    background-color: #f0bb4b;\\n    background-image: -webkit-gradient(linear, left top, left bottom, from(#f0bb4b), to(#d9aa44));\\n    background-image: -webkit-linear-gradient(top, #f0bb4b, #d9aa44);\\n    background-image: -moz-linear-gradient(top, #f0bb4b, #d9aa44);\\n    background-image: -ms-linear-gradient(top, #f0bb4b, #d9aa44);\\n    background-image: -o-linear-gradient(top, #f0bb4b, #d9aa44);\\n    background-image: linear-gradient(top, #f0bb4b, #d9aa44);\\n}\\n.progressbar.widget .green {\\n    background-color: #a1ce5b;\\n    background-image: -webkit-gradient(linear, left top, left bottom, from(#a1ce5b), to(#91ba52));\\n    background-image: -webkit-linear-gradient(top, #a1ce5b, #91ba52);\\n    background-image: -moz-linear-gradient(top, #a1ce5b, #91ba52);\\n    background-image: -ms-linear-gradient(top, #a1ce5b, #91ba52);\\n    background-image: -o-linear-gradient(top, #a1ce5b, #91ba52);\\n    background-image: linear-gradient(top, #a1ce5b, #91ba52);\\n}\\n.progressbar.widget .blue {\\n    background-color: #66b3cc;\\n    background-image: -webkit-gradient(linear, left top, left bottom, from(#66b3cc), to(#5da3ba));\\n    background-image: -webkit-linear-gradient(top, #66b3cc, #5da3ba);\\n    background-image: -moz-linear-gradient(top, #66b3cc, #5da3ba);\\n    background-image: -ms-linear-gradient(top, #66b3cc, #5da3ba);\\n    background-image: -o-linear-gradient(top, #66b3cc, #5da3ba);\\n    background-image: linear-gradient(top, #66b3cc, #5da3ba);\\n}\\n\", \"\"]);\n// Exports\n/* harmony default export */ __webpack_exports__[\"default\"] = (___CSS_LOADER_EXPORT___);\n\n\n//# sourceURL=webpack:///./src/js/widget/progressbar.css?./node_modules/css-loader/dist/cjs.js");

/***/ }),

/***/ "./src/js/locale-date.js":
/*!*******************************!*\
  !*** ./src/js/locale-date.js ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**\n * @author Oscar Fonts <oscar.fonts@geomati.co>\n */\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! ./i18n */ \"./src/js/i18n.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(i18n) {\n    \"use strict\";\n\n    var date = {\n        utc: false,\n        locale: navigator.language || navigator.browserLanguage\n    };\n\n    return {\n        display: function(d) {\n            if (!d) {\n                return i18n.t(\"(no date)\");\n            }\n            if (date.utc) {\n                return d.toLocaleString(date.locale, {\n                    timeZone: \"UTC\"\n                }) + \" UTC\";\n            } else {\n                return d.toLocaleString(date.locale);\n            }\n        },\n        locale: function(l) {\n            if (l) {\n                date.locale = l;\n            }\n            return date.locale;\n        },\n        utc: function(u) {\n            if (typeof u !== 'undefined') {\n                date.utc = u;\n            }\n            return date.utc;\n        }\n    };\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n//# sourceURL=webpack:///./src/js/locale-date.js?");

/***/ }),

/***/ "./src/js/sos-data-access.js":
/*!***********************************!*\
  !*** ./src/js/sos-data-access.js ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**\n * @author Oscar Fonts <oscar.fonts@geomati.co>\n */\n !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! ./SOS */ \"./src/js/SOS.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(SOS) {\n    \"use strict\";\n\n    var propertyNames = {};\n    var waitingDescribeResponse = {};\n    var propertyCallbackQueue = {};\n\n\treturn function(config, redraw, errorHandler) {\n        SOS.setUrl(config.service);\n\n        function read() {\n            var offering = config.offering;\n            var features = config.feature ? [config.feature] : isArray(config.features) ? config.features : config.features ? JSON.parse(config.features) : undefined;\n            var properties = config.property ? [config.property] : isArray(config.properties) ? config.properties : config.properties ? JSON.parse(config.properties) : undefined;\n            var time = (config.time_start && config.time_end) ? [config.time_start, config.time_end] : \"latest\";\n            SOS.getObservation(offering, features, properties, time, parse, errorHandler);\n        }\n\n        function isArray(obj) {\n            return Object.prototype.toString.call(obj) === '[object Array]';\n        }\n\n        function parse(observations) {\n            if (!observations.length) {\n                redraw([]);\n            }\n\n            // Get tabular data from observations\n            var data = [];\n            for (var i in observations) {\n                var observation = observations[i];\n                getPropertyName(observation.procedure, observation.observableProperty, addObservation, observation);\n            }\n\n            function addObservation(property, observation) {\n                var foi = observation.featureOfInterest;\n                data.push({\n                    time: new Date(observation.resultTime),\n                    value: observation.result.hasOwnProperty(\"value\") ? observation.result.value : observation.result,\n                    feature: foi.name ? foi.name.value : (foi.identifier ? foi.identifier.value : foi),\n                    property: property,\n                    uom: observation.result.hasOwnProperty(\"uom\") ? observation.result.uom : \"(N/A)\"\n                });\n                if (data.length == observations.length) {\n                    redraw(data);\n                }\n            }\n        }\n\n        function getPropertyName(procedure, id, callback, context) {\n            if (!propertyNames[procedure]) {\n                // Queue callback call\n                if (!propertyCallbackQueue[procedure]) {\n                    propertyCallbackQueue[procedure] = [];\n                }\n\n                propertyCallbackQueue[procedure].push({\n                    callback: callback,\n                    id: id,\n                    context: context\n                });\n\n                if (!waitingDescribeResponse[procedure]) {\n                    waitingDescribeResponse[procedure] = true;\n                    // Trigger a DescribeSensor, cache all property names for this procedure\n                    SOS.describeSensor(procedure, function(description) {\n                        var properties = description.hasOwnProperty(\"ProcessModel\") ? description.ProcessModel.outputs.OutputList.output : description.System.outputs.OutputList.output;\n                        properties = properties instanceof Array ? properties : [properties];\n                        var types = [\"Quantity\", \"Count\", \"Boolean\", \"Category\", \"Text\", \"ObservableProperty\"];\n\n                        var names = [];\n                        for (var i in properties) {\n                            var property = properties[i];\n                            for (var j in types) {\n                                var type = types[j];\n                                if (property.hasOwnProperty(type)) {\n                                    property.id = property[type].definition;\n                                }\n                            }\n                            names[property.id] = property.name;\n                        }\n                        propertyNames[procedure] = names;\n\n                        // Clear propertyCallbackQueue\n                        while (propertyCallbackQueue[procedure].length) {\n                            var elem = propertyCallbackQueue[procedure].shift();\n                            elem.callback.call(undefined, propertyNames[procedure][elem.id], elem.context);\n                        }\n                    }, errorHandler);\n                }\n            } else {\n                callback(propertyNames[procedure][id], context);\n            }\n        }\n\n        return {\n            read: read\n        };\n\t};\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n//# sourceURL=webpack:///./src/js/sos-data-access.js?");

/***/ }),

/***/ "./src/js/widget-common.js":
/*!*********************************!*\
  !*** ./src/js/widget-common.js ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**\n * @author Martí Pericay <marti@pericay.com>\n * @author Oscar Fonts <oscar.fonts@geomati.co>\n */\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! ./locale-date */ \"./src/js/locale-date.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(ld) {\n    \"use strict\";\n\n    function loadCSS(url) {\n        var link = document.createElement(\"link\");\n        link.setAttribute(\"rel\", \"stylesheet\");\n        link.setAttribute(\"type\", \"text/css\");\n        link.setAttribute(\"href\", url);\n        if (typeof link != \"undefined\") {\n            document.getElementsByTagName(\"head\")[0].appendChild(link);\n        }\n    }\n\n    return {\n        inputs: [\"service\", \"offering\"],\n        optional_inputs: [\"footnote\", \"custom_css_url\", \"display_utc_times\"],\n\n        init: function(config, el) {\n            if (config.custom_css_url !== undefined) {\n                loadCSS(config.custom_css_url);\n            }\n            if (config.footnote !== undefined && el.querySelector(\".footnote\")) {\n                el.querySelector(\".footnote\").innerHTML = config.footnote;\n            }\n            if(config.display_utc_times) {\n                ld.utc(true);\n            }\n        }\n    };\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n//# sourceURL=webpack:///./src/js/widget-common.js?");

/***/ }),

/***/ "./src/js/widget/progressbar.css":
/*!***************************************!*\
  !*** ./src/js/widget/progressbar.css ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var api = __webpack_require__(/*! ../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = __webpack_require__(/*! !../../../node_modules/css-loader/dist/cjs.js!./progressbar.css */ \"./node_modules/css-loader/dist/cjs.js!./src/js/widget/progressbar.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.i, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};\n\n//# sourceURL=webpack:///./src/js/widget/progressbar.css?");

/***/ }),

/***/ "./src/js/widget/progressbar.js":
/*!**************************************!*\
  !*** ./src/js/widget/progressbar.js ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/**\n * @author Oscar Fonts <oscar.fonts@geomati.co>\n */\n!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! ../sos-data-access */ \"./src/js/sos-data-access.js\"), __webpack_require__(/*! ./progressbar.css */ \"./src/js/widget/progressbar.css\"), __webpack_require__(/*! ../locale-date */ \"./src/js/locale-date.js\"), __webpack_require__(/*! ../widget-common */ \"./src/js/widget-common.js\")], __WEBPACK_AMD_DEFINE_RESULT__ = (function(data_access, drawing, ld, common) {\n    \"use strict\";\n\n    var template = [\n        '<div class=\"progressbar widget\">',\n            '<h1 class=\"feature\"></h1>',\n            '<h3 class=\"property\"></h3>',\n            '<div class=\"progress\">',\n                '<div class=\"min\">0</div>',\n                '<div class=\"max\">100</div>',\n                '<div class=\"background-bar\">',\n                    '<span class=\"green bar\">',\n                        '<div class=\"value\"></div>',\n                    '</span>',\n                '</div>',\n            '</div>',\n            '<h3 class=\"date\"></h3>',\n            '<div><span class=\"footnote\"></span></div>',\n        '</div>'\n    ].join('');\n\n    return {\n        inputs: common.inputs.concat([\"feature\", \"property\", \"refresh_interval\", \"min_value\", \"max_value\"]),\n        optional_inputs: common.optional_inputs,\n        preferredSizes: [{w: 500, h: 220}],\n\n        init: function(config, el, errorHandler) {\n            // Render template\n            el.innerHTML = template;\n            el.querySelector(\".min\").innerHTML = config.min_value;\n            el.querySelector(\".max\").innerHTML = config.max_value;\n\n            //load widget common features\n            common.init(config, el);\n\n            // Setup SOS data access\n            var data = data_access(config, redraw, errorHandler);\n            var refreshIntervalId = setInterval(data.read, config.refresh_interval * 1000);\n            data.read();\n\n            // Update view\n            function redraw(data) {\n                var measure = data[0];\n                el.querySelector(\".date\").innerHTML = ld.display(measure.time);\n                el.querySelector(\".value\").innerHTML = measure.value + \" \" + measure.uom;\n                el.querySelector(\".feature\").innerHTML = measure.feature;\n                el.querySelector(\".property\").innerHTML = measure.property;\n\n                var fullspan = el.querySelector(\".background-bar\").offsetWidth;\n                var proportion = (measure.value - config.min_value) / (config.max_value - config.min_value);\n                var width = fullspan * proportion;\n\n                el.querySelector(\".bar\").style.width = width + \"px\";\n            }\n\n            return {\n                destroy: function() {\n                    clearInterval(refreshIntervalId);\n                }\n            };\n        }\n    };\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n//# sourceURL=webpack:///./src/js/widget/progressbar.js?");

/***/ })

}]);