(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{211:function(e,t,r){"use strict";var o=r(11);const n={},a={},s={};t.a=(e,t,r)=>{function i(e){e.length||t([]);const i=[];function c(r,o){const n=o.featureOfInterest;i.push({time:new Date(o.resultTime),value:Object.prototype.hasOwnProperty.call(o.result,"value")?o.result.value:o.result,feature:n.name?n.name.value:n.identifier?n.identifier.value:n,property:r,uom:Object.prototype.hasOwnProperty.call(o.result,"uom")?o.result.uom:"(N/A)"}),i.length===e.length&&t(i)}Object.values(e).forEach(e=>{var t,i,l,u;t=e.procedure,i=e.observableProperty,l=c,u=e,n[t]?l(n[t][i],u):(s[t]||(s[t]=[]),s[t].push({callback:l,id:i,context:u}),a[t]||(a[t]=!0,o.a.describeSensor(t,e=>{let r=Object.prototype.hasOwnProperty.call(e,"ProcessModel")?e.ProcessModel.outputs.OutputList.output:e.System.outputs.OutputList.output;r=r instanceof Array?r:[r];const o=["Quantity","Count","Boolean","Category","Text","ObservableProperty"],a=[];for(Object.values(r).forEach(e=>{Object.values(o).forEach(t=>{Object.prototype.hasOwnProperty.call(e,t)&&(e.id=e[t].definition)}),a[e.id]=e.name}),n[t]=a;s[t].length;){const e=s[t].shift();e.callback.call(void 0,n[t][e.id],e.context)}},r)))})}return o.a.setUrl(e.service),{read:function(){const{offering:t,feature:n,property:a,features:s,properties:c,time_start:l,time_end:u}=e,p=n?[n]:Object(o.b)(s)?s:s?JSON.parse(s):void 0,d=a?[a]:Object(o.b)(c)?c:c?JSON.parse(c):void 0,m=l&&u?[l,u]:"latest";o.a.getObservation(t,p,d,m,i,r)}}}},37:function(e,t,r){"use strict";r.r(t);var o=r(216),n=r.n(o),a=r(261),s=r.n(a),i=r(211),c=r(212);s()(n.a);const l=["&gt; 10 m/s","8-10 m/s","6-8 m/s","4-6 m/s","2-4 m/s","0-2 m/s"];t.default={inputs:c.a.inputs.concat(["feature","properties","time_start","time_end","refresh_interval","title"]),optional_inputs:["subtitle"].concat(c.a.optional_inputs),preferredSizes:[{w:620,h:450}],init(e,t,r){const o=document.createElement("div");o.className="windrose widget";const a=document.createElement("div");o.appendChild(a);const s=document.createElement("div"),u=document.createElement("span");u.className="footnote",s.appendChild(u),o.appendChild(s),t.appendChild(o),c.a.init(e,t,r);const p=Object(i.a)(e,(function(t){const r=[];Object.keys(t).forEach(e=>{const o=t[e],n=o.time.getTime(),a="º"===o.uom?1:0;r[n]||(r[n]=[]),r[n][a]=o.value});const o=[];for(;o.length<6;){const e=[];for(;e.push(null)<16;);o.push(e)}let s=0;Object.keys(r).forEach(e=>{const t=r[e];if(2===t.length){const e=5-Math.min(Math.floor(t[0]/2),5),r=Math.round(t[1]/22.5)%16;o[e][r]?o[e][r]+=1:o[e][r]=1,s+=1}});const i=[];Object.keys(o).forEach(e=>{let t=0;Object.keys(o[e]).forEach(r=>{o[e][r]=100*o[e][r]/s,t+=o[e][r]}),i.push({name:`${l[e]} (${Math.round(t)}%)`,data:o[e]})}),new n.a.Chart({chart:{type:"column",polar:!0,renderTo:a},title:{text:e.title},subtitle:{text:e.subtitle},pane:{size:"85%"},legend:{align:"right",verticalAlign:"top",y:100,layout:"vertical"},xAxis:{tickmarkPlacement:"on",categories:["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"]},yAxis:{min:0,endOnTick:!1,showLastLabel:!0,labels:{formatter(){return this.value+" %"}}},tooltip:{formatter(){return`<span style="color:${this.series.color}">●</span> ${this.series.name}: <b>${n.a.numberFormat(this.y,1)} %</b><br/>`}},plotOptions:{series:{stacking:"normal",shadow:!1,groupPadding:0,pointPlacement:"on"}},colors:["#BD0BC9","#C9170B","#C9760B","#BDC90B","#0BC917","#0BBDC9"],series:i})})),d=setInterval(p.read,1e3*e.refresh_interval);return p.read(),{destroy(){clearInterval(d)}}}}}}]);
//# sourceMappingURL=widget-windrose-js.chunk.js.map